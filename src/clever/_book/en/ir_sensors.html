
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Working with IR sensors on Raspberry Pi 3 · Clever</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Copter Express">
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-image-zoom/zoom.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

    
    <link rel="stylesheet" type="text/css" href="../clever.css" />
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="fpv.html" />
    
    
    <link rel="prev" href="gps.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="gloss.html">
            
                <a href="gloss.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="safety.html">
            
                <a href="safety.html">
            
                    
                    Safety tips
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Assembly
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="assemble_4.html">
            
                <a href="assemble_4.html">
            
                    
                    Clever 4 assembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="assemble_3.html">
            
                <a href="assemble_3.html">
            
                    
                    Clever 3 assembly
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="assemble_2.html">
            
                <a href="assemble_2.html">
            
                    
                    Clever 2 assembly
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    Configuration
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="setup.html">
            
                <a href="setup.html">
            
                    
                    Initial setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="calibration.html">
            
                <a href="calibration.html">
            
                    
                    Sensor calibration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="radio.html">
            
                <a href="radio.html">
            
                    
                    RC setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="modes.html">
            
                <a href="modes.html">
            
                    
                    Flight modes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="power.html">
            
                <a href="power.html">
            
                    
                    Power setup
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Working with Raspberry Pi
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="raspberry.html">
            
                <a href="raspberry.html">
            
                    
                    Raspberry Pi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="image.html">
            
                <a href="image.html">
            
                    
                    RPi Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="wifi.html">
            
                <a href="wifi.html">
            
                    
                    Wi-Fi connection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="connection.html">
            
                <a href="connection.html">
            
                    
                    Connection to the Pixracer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="gcs_bridge.html">
            
                <a href="gcs_bridge.html">
            
                    
                    Using QGroundControl over Wi-Fi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="ssh.html">
            
                <a href="ssh.html">
            
                    
                    Remote shell
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="editing.html">
            
                <a href="editing.html">
            
                    
                    Editing files
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="selfcheck.html">
            
                <a href="selfcheck.html">
            
                    
                    Automated self-checks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.9" data-path="web_video_server.html">
            
                <a href="web_video_server.html">
            
                    
                    Viewing images from cameras
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    Programming
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="ros.html">
            
                <a href="ros.html">
            
                    
                    ROS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="mavros.html">
            
                <a href="mavros.html">
            
                    
                    MAVROS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="camera_frame.html">
            
                <a href="camera_frame.html">
            
                    
                    Camera orientation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="frames.html">
            
                <a href="frames.html">
            
                    
                    Coordinate systems (frames)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="simple_offboard.html">
            
                <a href="simple_offboard.html">
            
                    
                    Simple OFFBOARD
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="snippets.html">
            
                <a href="snippets.html">
            
                    
                    Code snippets
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" >
            
                <span>
            
                    
                    Fiducial markers (ArUco)
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.7.1" data-path="aruco.html">
            
                <a href="aruco.html">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.2" data-path="aruco_marker.html">
            
                <a href="aruco_marker.html">
            
                    
                    Marker detection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7.3" data-path="aruco_map.html">
            
                <a href="aruco_map.html">
            
                    
                    Map-based navigation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="optical_flow.html">
            
                <a href="optical_flow.html">
            
                    
                    Optical Flow
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.9" data-path="camera.html">
            
                <a href="camera.html">
            
                    
                    Computer vision basics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.10" data-path="leds.html">
            
                <a href="leds.html">
            
                    
                    LED strip
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.11" data-path="gpio.html">
            
                <a href="gpio.html">
            
                    
                    Working with GPIO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.12" data-path="sonar.html">
            
                <a href="sonar.html">
            
                    
                    Interfacing with a sonar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.13" data-path="rviz.html">
            
                <a href="rviz.html">
            
                    
                    Using rviz and rqt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.14" data-path="laser.html">
            
                <a href="laser.html">
            
                    
                    Interfacing with a laser rangefinder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.15" data-path="autolaunch.html">
            
                <a href="autolaunch.html">
            
                    
                    Software autorun
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    Supplementary materials
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="auto_setup.html">
            
                <a href="auto_setup.html">
            
                    
                    Guide on autonomous flight
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="hostname.html">
            
                <a href="hostname.html">
            
                    
                    Hostname
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="sitl.html">
            
                <a href="sitl.html">
            
                    
                    PX4 Simulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="calibratePID.html">
            
                <a href="calibratePID.html">
            
                    
                    PID Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="ros-install.html">
            
                <a href="ros-install.html">
            
                    
                    ROS Kinetic installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="rc.html">
            
                <a href="rc.html">
            
                    
                    Remote control app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="network.html">
            
                <a href="network.html">
            
                    
                    Wi-Fi Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="uart.html">
            
                <a href="uart.html">
            
                    
                    UART settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="px4_parameters.html">
            
                <a href="px4_parameters.html">
            
                    
                    PX4 Parameters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="flight_logs.html">
            
                <a href="flight_logs.html">
            
                    
                    PX4 Logs and Topics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="firmware.html">
            
                <a href="firmware.html">
            
                    
                    PX4 Firmware
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="mavlink.html">
            
                <a href="mavlink.html">
            
                    
                    MAVLink
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="test_connection.html">
            
                <a href="test_connection.html">
            
                    
                    Multimeter usage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.14" data-path="radioerrors.html">
            
                <a href="radioerrors.html">
            
                    
                    RC Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.15" data-path="esc_firmware.html">
            
                <a href="esc_firmware.html">
            
                    
                    Flashing ESCs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.16" data-path="camera_calibration.html">
            
                <a href="camera_calibration.html">
            
                    
                    Camera calibration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.17" data-path="arduino.html">
            
                <a href="arduino.html">
            
                    
                    Interfacing with Arduino
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.18" data-path="gps.html">
            
                <a href="gps.html">
            
                    
                    Connecting GPS
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.8.19" data-path="ir_sensors.html">
            
                <a href="ir_sensors.html">
            
                    
                    Working with IR sensors on Raspberry Pi 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.20" data-path="fpv.html">
            
                <a href="fpv.html">
            
                    
                    FPV Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.21" data-path="tinning.html">
            
                <a href="tinning.html">
            
                    
                    Tinning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.22" data-path="connectortypes.html">
            
                <a href="connectortypes.html">
            
                    
                    Types of power connectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.23" data-path="4in1.html">
            
                <a href="4in1.html">
            
                    
                    Connecting 4 in 1 ESCs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.24" data-path="tb.html">
            
                <a href="tb.html">
            
                    
                    Soldering safety
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.25" data-path="leds_old.html">
            
                <a href="leds_old.html">
            
                    
                    LED strip (legacy)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.26" data-path="contributing.html">
            
                <a href="contributing.html">
            
                    
                    Contribution Guidelines
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <span>
            
                    
                    Clever-based projects
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="shield.html">
            
                <a href="shield.html">
            
                    
                    Copter spheric guard
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="face_recognition.html">
            
                <a href="face_recognition.html">
            
                    
                    Face recognition system
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="android.html">
            
                <a href="android.html">
            
                    
                    Android RC app
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="3dscan.html">
            
                <a href="3dscan.html">
            
                    
                    3D-scanning drone
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="human_pose_estimation_drone_control.html">
            
                <a href="human_pose_estimation_drone_control.html">
            
                    
                    Human pose estimation drone control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="copterhack2018.html">
            
                <a href="copterhack2018.html">
            
                    
                    Copter Hack 2018
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="copterhack2017.html">
            
                <a href="copterhack2017.html">
            
                    
                    Copter Hack 2017
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" >
            
                <span>
            
                    
                    Textbook
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="lessons.html">
            
                <a href="lessons.html">
            
                    
                    Theory and Videos
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Working with IR sensors on Raspberry Pi 3</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="working-with-ir-sensors-on-raspberry-pi-3"><a name="working-with-ir-sensors-on-raspberry-pi-3" class="plugin-anchor" href="#working-with-ir-sensors-on-raspberry-pi-3"><i class="fa fa-link" aria-hidden="true"></i></a>Working with IR sensors on Raspberry Pi 3</h1>
<p>Infrared sensors are a convenient tool for transmitting any commands to the copter. They are flexible in configuration, and interaction with them is possible in Python.</p>
<h2 id="connecting-the-ir-receiver"><a name="connecting-the-ir-receiver" class="plugin-anchor" href="#connecting-the-ir-receiver"><i class="fa fa-link" aria-hidden="true"></i></a>Connecting the IR receiver</h2>
<p>Most IR receivers operate and are connected the same way. Such receivers have 3 pins for connecting: G/GND &#x2014; ground V/VCC &#x2014; 5V power, S/OUT &#x2014; signal.</p>
<p><img src="../assets/IR_reciver_connection.png" height="500px" alt="ir reciver connection to raspberry"></p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-lightbulb-o"></strong>
<p> The signal port doesn&apos;t have to be connected to port GPIO 17; this pin may be changed during the <a href="#in/out">in/out port settings</a>.</p>
</blockquote>
<h2 id="configuring-the-ir-receiver-to-work-with-the-lirc-module"><a name="configuring-the-ir-receiver-to-work-with-the-lirc-module" class="plugin-anchor" href="#configuring-the-ir-receiver-to-work-with-the-lirc-module"><i class="fa fa-link" aria-hidden="true"></i></a>Configuring the IR receiver to work with the LIRC module</h2>
<p>LIRC (Linux Infrared Remote Control) is a stable and time-proven open source library, which allows sending and receiving commands via an infrared port. LIRC is supported by Raspbian.</p>
<p>To install LIRC and related modules, connect your Raspberry Pi to the Internet and run the console command:</p>
<pre><code class="lang-(bash)">sudo apt-get update
sudo apt-get install lirc
sudo apt-get install python-lirc
pip install py-irsend
</code></pre>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-lightbulb-o"></strong>
<p> To correctly edit the system files, superuser privileges are required; when calling a text editor, use <code>sudo</code>.</p>
</blockquote>
<p><a name="in/out"></a>
After installing the module, edit file <code>/etc/modules</code> and add line:</p>
<pre><code>lirc_dev
lirc_rpi gpio_in_pin=18 gpio_out_pin=17
</code></pre><p>Where:</p>
<ul>
<li><code>gpio_in_pin</code> is the input pin from the receiver</li>
<li><code>gpio_out_pin</code> is the transmitter output pin</li>
</ul>
<p>Update the following line in file <code>/boot/config.txt</code>:</p>
<pre><code>dtoverlay=lirc-rpi,gpio_in_pin=18,gpio_out_pin=17
</code></pre><p>Add the following lines to file <code>/etc/lirc/hardware.conf</code>. Is this file does not exist, create it yourself.</p>
<pre><code>LIRCD_ARGS=&quot;--uinput --listen&quot;
LOAD_MODULES=true
DRIVER=&quot;default&quot;
DEVICE=&quot;/dev/lirc0&quot;
MODULES=&quot;lirc_rpi&quot;
</code></pre><p>Update the following lines in file <code>/etc/lirc/lirc_options.conf</code></p>
<pre><code>driver    = default
device    = /dev/lirc0
</code></pre><p>All required settings are made, you now have to restart your Raspberry Pi device to complete the installation. To do so, run:</p>
<pre><code class="lang-(bash)">sudo reboot
</code></pre>
<p>After rebooting, check its status by calling command:</p>
<pre><code class="lang-(bash)">sudo /etc/init.d/lircd status
</code></pre>
<p>If everything has been done correctly, the status should be <code>active</code>.
To check whether the installed module LIRC is running, disable daemon <code>lircd</code>, and call the appropriate command:</p>
<pre><code class="lang-(bash)">sudo /etc/init.d/lircd stop
mode2 -d /dev/lirc0
</code></pre>
<p>Now point the IR transmitter on your device and tap a few keys. You should see something like this:</p>
<pre><code>space 402351
pulse 135
space 7085
pulse 85
space 2903
pulse 560
space 1706
pulse 535
</code></pre><blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-lightbulb-o"></strong>
<p> If you are using an IR transmitter (a TV remote, an air conditioner remote, etc. and you are not getting the signal when checking, your remote is evidently using another signal frequency. When using receivers such as TSOP 22XX, the operating frequency of the signal reception will be in the range between 30 and 50 kHz.</p>
</blockquote>
<h2 id="write-your-configuration-of-the-ir-transmitter"><a name="write-your-configuration-of-the-ir-transmitter" class="plugin-anchor" href="#write-your-configuration-of-the-ir-transmitter"><i class="fa fa-link" aria-hidden="true"></i></a>Write your configuration of the IR transmitter</h2>
<p><a name="remote_control"></a></p>
<p>If you want to use your own IR transmitter, you will have to write its specific settings using the supplied module <code>irrecord</code>. For this purpose, disable daemon <code>lircd</code>, and call the appropriate command. During transmitter calibration, stick to all written instructions.</p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-lightbulb-o"></strong>
<p> Please note that the last step of the calibration will be specifying the names of the keys that you will want to decode programmatically. To view the list of available names, call command <code>irrecord --list-namespace</code>.</p>
</blockquote>
<pre><code class="lang-(bash)">irrecord -d /dev/lirc0 ~/lircd.conf
</code></pre>
<p>If you have managed to successfully write the configuration of your transmitter, file <code>your-name.lircd.conf</code> should appear in folder <code>/home/pi/</code>. Now you need to move the written configuration file to working folder <code>lirc</code>, and restart the daemon:</p>
<pre><code>sudo cp ~/your-name.lircd.conf /etc/lirc/lircd.conf
sudo /etc/init.d/lircd restart
</code></pre><p>To check whether the written configuration is recognized, call the appropriate module. Now when you tap the keys that you have specified in the previously created configuration, the terminal will show debug information about which key has been pressed.</p>
<pre><code>irw
</code></pre><blockquote class="clearfix alert alert-warning"><strong class="fa fa-2x fa-exclamation-triangle"></strong>
<p> when working with some transmitters, there are situations where the bit descriptions of keys are redundant; in this case, command <code>irw</code> may fail. To correct this error, open file <code>etc/lirc/lircd.conf</code> and check what the description of your keys looks like; if it looks like <code>KEY_1 0x00FF6897 0x7EE0CF2C</code> and in all lines the second digits match, you have to remove it, so that lines with keys assignment looks like <code>KEY_1 0x00FF6897</code> and all digits in them are unique. After completing these steps, close the file and restart the daemon.</p>
</blockquote>
<p>If you did everything correctly, upon tapping a key, you will see the output similar to:</p>
<pre><code>0000000000ff6897 00 KEY_1 pult
0000000000ff6897 01 KEY_1 pult
0000000000ff9867 00 KEY_2 pult
0000000000ff9867 01 KEY_2 pult
</code></pre><p>This means that your configuration is correctly detected by the program, and now you can program the desired action for tapping appropriate keys.</p>
<h2 id="working-with-ir-sensors-in-python"><a name="working-with-ir-sensors-in-python" class="plugin-anchor" href="#working-with-ir-sensors-in-python"><i class="fa fa-link" aria-hidden="true"></i></a>Working with IR sensors in Python</h2>
<p>To be able to use signals from the IR receiver in Python programs, you&apos;ll need package <code>python-lirc</code>. <a href="#install">Install it</a>, if necessary.</p>
<p>For correct obtaining information, create file <code>lircrc</code> in your own script, which will store settings of your keys and the program response upon calling.</p>
<p>This file is created in the folder from which your script will be called, <code>/home/pi/</code> by default.</p>
<p>To create the required file, use any text editor:</p>
<pre><code class="lang-(bash)">sudo nano .lircrc
</code></pre>
<p>The format of this file should be something like this:</p>
<pre><code>begin
prog = myprogram
button = KEY_1
config = one
end

begin
prog = myprogram
button = KEY_2
config = two
end
</code></pre><p>Where:</p>
<ul>
<li><code>prog</code> is the name of the program that you will call from your script</li>
<li><code>key</code> is the name of the key that you entered during transmitter setup</li>
<li><code>config</code> is the information to be passed to your program upon tapping a specified key</li>
</ul>
<p>All settings are now made, and you can proceed directly to programming IR signals.</p>
<p>For this purpose, create a Python script that will accept the values of the keys pressed and perform required action s accordingly.
An example of such a script:</p>
<pre><code class="lang-python"><span class="hljs-keyword">import</span> lirc
<span class="hljs-keyword">import</span> fly_module

<span class="hljs-comment"># ...</span>

sockid = lirc.init(<span class="hljs-string">&apos;myprogram&apos;</span>)

inf = lirc.nextcode()
<span class="hljs-keyword">if</span> inf[<span class="hljs-number">0</span>] == <span class="hljs-number">1</span>:
    print(<span class="hljs-string">&apos;You pressed key 1&apos;</span>)
<span class="hljs-keyword">elif</span> inf[<span class="hljs-number">0</span>] == <span class="hljs-number">2</span>:
    print(<span class="hljs-string">&apos;You pressed key 2&apos;</span>)

lirc.deinit()
</code></pre>
<h2 id="working-with-the-ir-transmitter"><a name="working-with-the-ir-transmitter" class="plugin-anchor" href="#working-with-the-ir-transmitter"><i class="fa fa-link" aria-hidden="true"></i></a>Working with the IR transmitter</h2>
<p>To work with the IR transmitter, connect it to the ports specified <a href="#in/out">during setup</a>.</p>
<p><img src="../assets/IR_transmitter_connection.png" height="500px" alt="IR transmitter connection to raspberry"></p>
<p><img src="../assets/IR_transmitter.png" height="200px" alt="IR transmitter scheme"></p>
<blockquote class="clearfix alert alert-success"><strong class="fa fa-2x fa-lightbulb-o"></strong>
<p> if you are using a ready IR transmitter board, connect it to required pins of Raspberry in accordance with pins marking, in the same way as with the receiver.</p>
</blockquote>
<p>If everything has been properly connected, you will be able to send signals specified in <a href="#remote_control">transmitter settings</a> using the command:</p>
<pre><code class="lang-(bash)">irsend SEND_ONCE deviceName keyName
</code></pre>
<p>Where:</p>
<ul>
<li>SEND_ONCE is the parameter responsible for sending a single signal, or sending a signal from a depressed and held down key</li>
<li>deviceName is the name of the transmitter specified during <a href="#remote_control">setup</a></li>
<li>keyName is the name of one of the keys specified during transmitter configuration</li>
</ul>
<p>To work with <code>irsend</code> inside your script, you&apos;ll need module <code>python-irsend</code>; if necessary, <a href="#install">install it</a>.</p>
<p>To use <code>irsend</code>, import the library and call the appropriate command:</p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> py_irsend <span class="hljs-keyword">import</span> irsend


irsend.send_once(<span class="hljs-string">&apos;YourRemote&apos;</span>, [<span class="hljs-string">&apos;YourKey&apos;</span>])
</code></pre>
<p>Where:</p>
<ul>
<li>YourRemote is the name of your transmitter specified during setup</li>
<li>YourKey is the name of one of the buttons specified during setup</li>
</ul>
<p><footer id="page-footer" class="localized-footer"><!-- markdownlint-disable MD041 -->
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank"><img src="../assets/cc-by-nc-sa.svg"></a>
This documentation is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>
</footer></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="gps.html" class="navigation navigation-prev " aria-label="Previous page: Connecting GPS">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="fpv.html" class="navigation navigation-next " aria-label="Next page: FPV Setup">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Working with IR sensors on Raspberry Pi 3","level":"1.8.19","depth":2,"next":{"title":"FPV Setup","level":"1.8.20","depth":2,"path":"fpv.md","ref":"fpv.md","articles":[]},"previous":{"title":"Connecting GPS","level":"1.8.18","depth":2,"path":"gps.md","ref":"gps.md","articles":[]},"dir":"ltr"},"config":{"plugins":["richquotes@https://github.com/okalachev/gitbook-plugin-richquotes.git","yametrika","anchors","validate-links","bulk-redirect@https://github.com/okalachev/gitbook-plugin-bulk-redirect.git","sitemap@https://github.com/okalachev/plugin-sitemap.git","toolbar@https://github.com/hamishwillee/gitbook-plugin-toolbar.git","addcssjs","localized-footer@https://github.com/okalachev/gitbook-plugin-localized-footer.git","image-zoom@https://github.com/okalachev/gitbook-plugin-image-zoom.git","language-picker@https://github.com/okalachev/gitbook-plugin-language-picker.git"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"yametrika":{"id":49359238},"validate-links":{"defaultScheme":"https","local":"warn","remote":"disabled"},"language-picker":{"grid-columns":3,"languages":[["ru","Russian"],["en","English"]]},"image-zoom":{},"search":{},"addcssjs":{"css":["../clever.css"],"js":["../clever.js"]},"localized-footer":{"filename":"./FOOTER.md","hline":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{},"highlight":{},"sitemap":{"hostname":"https://clever.coex.tech"},"bulk-redirect":{"basepath":"","redirectsFile":"redirects.json","blank":true},"toolbar":{"buttons":[{"label":"Edit page on github","icon":"fa fa-pencil-square-o","position":"left","url":"https://github.com/CopterExpress/clever/edit/master/docs/{{filepath_lang}}"},{"label":"GitHub","icon":"fa fa-github","position":"left","url":"https://github.com/CopterExpress/clever"}]},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"theme":"default","author":"Copter Express","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Clever","language":"en","gitbook":"*","description":"Конструктор квадрокоптера «Клевер»"},"file":{"path":"ir_sensors.md","mtime":"2019-10-10T20:37:45.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-10-10T21:33:05.664Z"},"basePath":".","book":{"language":"en"}});
        });
    </script>
</div>

        
    
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-yametrika/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-toolbar/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-image-zoom/zoom.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    
    <script type="text/javascript" src="../clever.js"></script>
    

    <script type='text/javascript'>
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter49359238 = new Ya.Metrika({"id":49359238});
                } catch(e) { }
            });
            var n = d.getElementsByTagName('script')[0],
                s = d.createElement('script'),
                f = function () {
                    n.parentNode.insertBefore(s, n);
                };

            s.type = 'text/javascript';
            s.async = true;
            s.src = (d.location.protocol == 'https:' ? 'https:' : 'http:') + '//mc.yandex.ru/metrika/watch.js';
            if (w.opera == '[object Opera]') {
                d.addEventListener('DOMContentLoaded', f, false);
            } else {
                f();
            }
        })(document, window, 'yandex_metrika_callbacks');
    </script>
    <noscript>
        <div>
            <img src="//mc.yandex.ru/watch/49359238" style="position:absolute; left:-9999px;" alt=""/>
        </div>
    </noscript>

    </body>
</html>

